<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hello Notes Invoice</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
*{box-sizing:border-box}
body{margin:0;background:#eef3ff;font-family:Poppins,sans-serif}

.invoice{
  width:210mm;
  height:297mm;
  margin:auto;
  background:#fff;
  padding:12mm;
  overflow:hidden;
}

.header{text-align:center}
.header img{width:70px}
.header h2{color:#1a4fa3;margin:4px 0}

input,select{
  border:1px solid #c9b062;
  padding:4px;
  font-size:12px;
}

table{width:100%;border-collapse:collapse;margin-top:8px}
th,td{
  border:1px solid #c9b062;
  padding:5px;
  font-size:12px;
  text-align:center;
}
th{background:#eef3ff;color:#1a4fa3}
td input{border:none;text-align:center}

.remove-btn{
  background:#c40000;color:#fff;border:none;
  width:18px;height:18px;border-radius:4px
}

.add-btn,.actions{margin-top:6px}

.totals{
  border:2px solid #c9b062;
  padding:6px;
  margin-top:8px;
}
.row{display:flex;justify-content:space-between;font-size:12px}
.grand{font-weight:600;color:#1a4fa3}

.words{
  border:1px solid #c9b062;
  padding:5px;
  margin-top:6px;
  font-size:12px;
}

@media print{
  .remove-btn,.add-btn,.actions{display:none!important}
  input,select{border:none}
}
</style>
</head>

<body>

<div class="invoice" id="invoice">

<div class="header">
<img src="LOGO.jpg">
<h2>Hello Notes</h2>
<p>GST: 29AQFS154Q1ZU</p>
<p>No.6 Kurubarahalli Main Road, Bengaluru – 570079</p>
</div>

<table>
<tr>
<td>Invoice Number<br><input></td>
<td>Invoice Date<br><input type="date"></td>
</tr>
<tr>
<td colspan="2">Customer Name<br><input></td>
</tr>
</table>

<table id="items">
<thead>
<tr>
<th>Item</th><th>Qty</th><th>Rate</th><th>Total</th><th></th>
</tr>
</thead>
<tbody id="itemBody"></tbody>
</table>

<button class="add-btn" onclick="addItem()">+ Add Item</button>

<div class="totals">
<div class="row"><span>Subtotal</span><span>₹ <span id="subtotal">0.00</span></span></div>

<div class="row">
<span>Discount</span>
<input type="number" id="discountVal" value="0" oninput="calc()" style="width:70px">
<select id="discountType" onchange="calc()">
<option value="percent">%</option>
<option value="flat">₹</option>
</select>
</div>

<div class="row">
<span>GST Based On</span>
<select id="gstBase" onchange="calc()">
<option value="subtotal">Subtotal</option>
<option value="afterDiscount">After Discount</option>
</select>
</div>

<div class="row">
<span>GST %</span>
<input type="number" id="gst" value="9" oninput="calc()" style="width:70px">
</div>

<div class="row"><span>CGST</span><span>₹ <span id="cgst">0.00</span></span></div>
<div class="row"><span>SGST</span><span>₹ <span id="sgst">0.00</span></span></div>

<div class="row grand"><span>Grand Total</span><span>₹ <span id="grand">0.00</span></span></div>
</div>

<div class="words">
Amount in Words: <span id="words"></span>
</div>

<div class="actions">
<button onclick="window.print()">Print</button>
<button onclick="downloadPDF()">Download PDF</button>
</div>

</div>

<script>
const body=document.getElementById("itemBody");

function addItem(){
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td><input></td>
    <td><input type="number" value="1" oninput="calc()"></td>
    <td><input type="number" value="0" oninput="calc()"></td>
    <td class="rowTotal">0.00</td>
    <td><button class="remove-btn" onclick="removeRow(this)">×</button></td>
  `;
  body.appendChild(tr);
  calc();
}

for(let i=0;i<13;i++) addItem();

function removeRow(btn){
  btn.closest("tr").remove();
  calc();
}

function calc(){
  let subtotal=0;

  document.querySelectorAll("#itemBody tr").forEach(r=>{
    const qty=Number(r.children[1].children[0].value)||0;
    const rate=Number(r.children[2].children[0].value)||0;
    const total=qty*rate;
    r.querySelector(".rowTotal").innerText=total.toFixed(2);
    subtotal+=total;
  });

  document.getElementById("subtotal").innerText=subtotal.toFixed(2);

  let discount=Number(discountVal.value)||0;
  let discountAmt = discountType.value==="percent"
    ? subtotal*(discount/100)
    : discount;

  let taxableBase = gstBase.value==="afterDiscount"
    ? subtotal-discountAmt
    : subtotal;

  let gstRate=Number(gst.value)||0;
  let gstAmt = taxableBase*(gstRate/100);

  cgst.innerText=(gstAmt/2).toFixed(2);
  sgst.innerText=(gstAmt/2).toFixed(2);

  let grand = (subtotal-discountAmt)+gstAmt;
  document.getElementById("grand").innerText=grand.toFixed(2);
  words.innerText=toWords(grand);
}

function toWords(n){
  const a=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
  "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
  const b=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];
  n=Math.floor(n);
  if(n===0) return "Zero Rupees Only";

  function w(x){
    if(x<20) return a[x];
    if(x<100) return b[Math.floor(x/10)]+" "+a[x%10];
    if(x<1000) return a[Math.floor(x/100)]+" Hundred "+w(x%100);
    if(x<100000) return w(Math.floor(x/1000))+" Thousand "+w(x%1000);
    return w(Math.floor(x/100000))+" Lakh "+w(x%100000);
  }
  return w(n)+" Rupees Only";
}

function downloadPDF(){
  document.querySelector(".actions").style.display="none";
  html2pdf().set({
    margin:5,
    filename:"HelloNotes_Invoice.pdf",
    html2canvas:{scale:2},
    jsPDF:{format:"a4",orientation:"portrait"}
  }).from(invoice).save().then(()=>{
    document.querySelector(".actions").style.display="block";
  });
}

calc();
</script>

</body>
</html>
