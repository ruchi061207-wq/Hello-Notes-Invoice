<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hello Notes Invoice</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
*{box-sizing:border-box;}
body{
    font-family:'Poppins',sans-serif;
    background:#eef3ff;
    margin:0;
}
.invoice{
    width:210mm;
    min-height:297mm;
    background:#fff;
    margin:auto;
    padding:12mm;
}

/* HEADER */
.header{text-align:center;}
.header img{width:75px;}
.header h2{margin:5px 0;color:#154aa8;font-weight:600;}
.header p{margin:2px;font-size:12px;}

/* INPUTS */
input{
    width:100%;
    border:1px solid #c9b062;
    padding:6px;
    font-size:12px;
}

/* TABLE */
table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
}
th,td{
    border:1px solid #c9b062;
    padding:6px;
    font-size:12px;
    text-align:center;
}
th{
    background:#f2f6ff;
    color:#154aa8;
}
td input{
    border:none;
    text-align:center;
}

/* REMOVE BUTTON */
.remove-btn{
    background:#c40000;
    color:#fff;
    border:none;
    border-radius:4px;
    width:22px;
    height:22px;
    cursor:pointer;
}

/* TOTALS */
.totals{
    border:2px solid #c9b062;
    margin-top:10px;
    padding:8px;
    page-break-inside:avoid;
}
.totals-row{
    display:flex;
    justify-content:space-between;
    margin:5px 0;
    font-size:13px;
}
.grand{
    font-size:15px;
    font-weight:600;
    color:#154aa8;
    border-top:1px solid #c9b062;
    padding-top:5px;
}

/* AMOUNT WORDS */
.words{
    border:1px solid #c9b062;
    margin-top:8px;
    padding:6px;
    font-size:12px;
    font-weight:500;
}

/* PRINT & PDF SAFETY */
@media print{
    .remove-btn,button{display:none !important;}
    input{border:none;}
    body{background:#fff;}
}
</style>
</head>

<body>

<div class="invoice" id="invoice">

<div class="header">
    <img src="https://i.imgur.com/7Y8Y6R8.png">
    <h2>Hello Notes</h2>
    <p>GST: 29AQFS154Q1ZU</p>
    <p>No.6 Kurubarahalli Main Road, Bengaluru – 570079</p>
</div>

<table>
<tr>
<td>Invoice Number<br><input></td>
<td>Invoice Date<br><input type="date"></td>
</tr>
<tr>
<td colspan="2">Customer Name<br><input></td>
</tr>
</table>

<table id="items">
<thead>
<tr>
<th>Item</th>
<th>Qty</th>
<th>Rate</th>
<th>Total</th>
<th></th>
</tr>
</thead>
<tbody>
<script>
for(let i=0;i<13;i++){
document.write(`
<tr>
<td><input></td>
<td><input type="number" value="1" oninput="calc()"></td>
<td><input type="number" value="0" oninput="calc()"></td>
<td class="rowTotal">0.00</td>
<td><button class="remove-btn" onclick="removeRow(this)">×</button></td>
</tr>
`);
}
</script>
</tbody>
</table>

<div class="totals">
<div class="totals-row"><span>Subtotal</span><span>₹ <span id="subtotal">0.00</span></span></div>

<div class="totals-row">
<span>Discount (%)</span>
<input type="number" id="discount" value="0" oninput="calc()" style="width:80px">
</div>

<div class="totals-row">
<span>GST %</span>
<input type="number" id="gst" value="9" oninput="calc()" style="width:80px">
</div>

<div class="totals-row"><span>CGST</span><span>₹ <span id="cgst">0.00</span></span></div>
<div class="totals-row"><span>SGST</span><span>₹ <span id="sgst">0.00</span></span></div>

<div class="totals-row grand">
<span>Grand Total</span>
<span>₹ <span id="grand">0.00</span></span>
</div>
</div>

<div class="words">
Amount in Words: <span id="words"></span>
</div>

<button onclick="downloadPDF()">Download PDF</button>

</div>

<script>
function removeRow(btn){
    btn.closest("tr").remove();
    calc();
}

function calc(){
    let subtotal=0;
    document.querySelectorAll("#items tbody tr").forEach(r=>{
        let q=+r.children[1].children[0].value||0;
        let r1=+r.children[2].children[0].value||0;
        let t=q*r1;
        r.querySelector(".rowTotal").innerText=t.toFixed(2);
        subtotal+=t;
    });

    subtotalEl.innerText=subtotal.toFixed(2);

    let disc=subtotal*(+discount.value||0)/100;
    let after=subtotal-disc;

    let gstAmt=after*(+gst.value||0)/100;
    cgst.innerText=(gstAmt/2).toFixed(2);
    sgst.innerText=(gstAmt/2).toFixed(2);

    let grand=after+gstAmt;
    document.getElementById("grand").innerText=grand.toFixed(2);
    words.innerText=numberToWords(grand);
}

const subtotalEl=document.getElementById("subtotal");

function numberToWords(num){
    const a=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
    "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
    const b=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];
    const n=Math.floor(num);
    if(n===0) return "Zero Rupees Only";

    function w(x){
        if(x<20)return a[x];
        if(x<100)return b[Math.floor(x/10)]+" "+a[x%10];
        if(x<1000)return a[Math.floor(x/100)]+" Hundred "+w(x%100);
        if(x<100000)return w(Math.floor(x/1000))+" Thousand "+w(x%1000);
        return w(Math.floor(x/100000))+" Lakh "+w(x%100000);
    }
    return w(n)+" Rupees Only";
}

function downloadPDF(){
    html2pdf().set({
        margin:5,
        filename:'HelloNotes_Invoice.pdf',
        html2canvas:{scale:2},
        jsPDF:{format:'a4',orientation:'portrait'}
    }).from(invoice).save();
}

calc();
</script>

</body>
</html>
