<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Invoice â€“ Hello Notes</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
*{box-sizing:border-box;}
body{
  font-family:Poppins,sans-serif;
  background:#eef3fb;
  margin:0;
  padding:12px;
}

/* A4 container */
.invoice{
  width:190mm;
  height:277mm;              /* ðŸ”’ FIXED A4 HEIGHT */
  margin:auto;
  background:#fff;
  padding:12px;
  border:1px solid #d4af37;
  border-radius:8px;
  position:relative;        /* anchor totals */
  overflow:hidden;          /* prevent page spill */
}

/* HEADER */
.header{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
}
.logo img{
  max-width:120px;
  object-fit:contain;
}
.header-text{text-align:center;}
.header-text h1{margin:0;color:#2f36b3;}
.header-text p{margin:2px 0;font-size:13px;}

.line{height:4px;background:#2f36b3;margin:12px 0;}

/* FORM */
label{font-size:13px;display:block;margin-bottom:4px;}
input,select{
  width:100%;
  height:34px;
  padding:4px 8px;
  border:1px solid #aaa;
  border-radius:5px;
  font-size:13px;
}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.mt10{margin-top:10px;}

/* TABLE */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
  table-layout:fixed;
}
th{
  background:#2f36b3;
  color:#fff;
  padding:6px;
  font-size:13px;
  height:30px;
}
td{
  border:1px solid #ccc;
  padding:3px 4px;
  font-size:12px;
}
td input{
  height:22px;
  border:none;
  font-size:12px;
}

/* ðŸ”’ EXACT 13 ROWS */
#items tbody tr{
  height:30px;
}

/* TOTALS BOX */
.totals{
  width:380px;
  background:#fff8f0;
  border:2px solid #d4af37;
  padding:12px;
  border-radius:10px;

  position:absolute;        /* ðŸ”’ KEY FIX */
  right:12px;
  bottom:14mm;              /* ðŸ”’ NEVER SPLITS */
}

.row{
  display:flex;
  justify-content:space-between;
  margin:6px 0;
}
.right{display:flex;gap:6px;}
.right input,.right select{width:90px;}
.grand{font-size:17px;font-weight:600;color:#2f36b3;}
.words{
  font-style:italic;
  min-height:32px;
  max-height:32px;
  overflow:hidden;
}

/* ACTIONS */
.actions{margin-top:12px;}
button{
  background:#2f36b3;
  color:#fff;
  border:none;
  padding:7px 12px;
  border-radius:6px;
  cursor:pointer;
}

/* PRINT */
@media print{
  .no-print{display:none!important;}
  .invoice{border:none;}
}

/* PAGE */
@page{
  size:A4;
  margin:10mm;
}

tr,td,th{
  page-break-inside:avoid!important;
}
</style>
</head>

<body>

<div class="invoice" id="invoice">

<div class="header">
  <div class="logo">
    <img src="LOGO.jpg">
  </div>
  <div class="header-text">
    <h1>Hello Notes</h1>
    <p><b>GST:</b> 29AFQFS5154Q1ZU</p>
    <p>No.6 Kurubarahalli Main Road, Kirloskar Layout</p>
    <p>Bengaluru â€“ 570079 | Phone: 8073431538</p>
  </div>
</div>

<div class="line"></div>

<div class="grid2">
  <div><label>Invoice Number</label><input></div>
  <div><label>Invoice Date</label><input type="date"></div>
</div>

<div class="mt10">
  <label>Customer Name</label>
  <input>
</div>

<table id="items">
<thead>
<tr>
  <th>Item</th><th>Qty</th><th>Rate</th><th>Total</th>
  <th class="no-print"></th>
</tr>
</thead>
<tbody></tbody>
</table>

<button class="no-print" onclick="addRow()">+ Add Item</button>

<div class="totals">
  <div class="row"><span>Subtotal</span><span id="sub">â‚¹0.00</span></div>

  <div class="row" id="discountRow">
    <span>Discount</span>
    <span class="right">
      <input id="disc" value="0" oninput="calc()">
      <select id="discType" onchange="calc()">
        <option>%</option>
        <option>â‚¹</option>
      </select>
    </span>
  </div>

  <div class="row">
    <span>GST Base</span>
    <select id="gstBase" onchange="calc()">
      <option value="subtotal">On Subtotal</option>
      <option value="discount">After Discount</option>
    </select>
  </div>

  <div class="row">
    <span>GST %</span>
    <input id="gst" value="9" oninput="calc()">
  </div>

  <div class="row"><span>CGST</span><span id="cgst">â‚¹0.00</span></div>
  <div class="row"><span>SGST</span><span id="sgst">â‚¹0.00</span></div>

  <div class="row grand"><span>Grand Total</span><span id="grand">â‚¹0.00</span></div>
  <div class="words" id="words">Amount in words: Rupees Only</div>
</div>

<div class="actions no-print">
  <button onclick="downloadPDF()">Download PDF</button>
  <button onclick="window.print()">Print</button>
</div>

</div>

<script>
const tbody=document.querySelector("#items tbody");

function addRow(){
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td><input></td>
    <td><input type="number" value="1" oninput="calc()"></td>
    <td><input type="number" value="0" oninput="calc()"></td>
    <td class="rt">0.00</td>
    <td class="no-print"><button onclick="this.closest('tr').remove();calc()">X</button></td>
  `;
  tbody.appendChild(tr);
  calc();
}

function numToWords(n){
  const a=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
  "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
  const b=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];
  if(n<20) return a[n];
  if(n<100) return b[Math.floor(n/10)]+" "+a[n%10];
  if(n<1000) return a[Math.floor(n/100)]+" Hundred "+numToWords(n%100);
  if(n<100000) return numToWords(Math.floor(n/1000))+" Thousand "+numToWords(n%1000);
  if(n<10000000) return numToWords(Math.floor(n/100000))+" Lakh "+numToWords(n%100000);
  return numToWords(Math.floor(n/10000000))+" Crore "+numToWords(n%10000000);
}

function calc(){
  let subtotal=0;
  document.querySelectorAll(".rt").forEach(c=>{
    const r=c.parentElement;
    const q=+r.children[1].children[0].value||0;
    const rate=+r.children[2].children[0].value||0;
    const t=q*rate;
    c.innerText=t.toFixed(2);
    subtotal+=t;
  });

  sub.innerText="â‚¹"+subtotal.toFixed(2);

  let d=+disc.value||0;
  let discount=discType.value=="%"?subtotal*d/100:d;

  let base=gstBase.value=="discount"?subtotal-discount:subtotal;
  let gstAmt=base*(+gst.value/100);

  cgst.innerText="â‚¹"+(gstAmt/2).toFixed(2);
  sgst.innerText="â‚¹"+(gstAmt/2).toFixed(2);

  let total=base+gstAmt;
  grand.innerText="â‚¹"+total.toFixed(2);
  words.innerText="Amount in words: "+numToWords(Math.round(total))+" Rupees Only";
}

function downloadPDF(){
  document.querySelectorAll(".no-print").forEach(e=>e.style.display="none");
  setTimeout(()=>{
    html2pdf().set({
      filename:'Invoice.pdf',
      jsPDF:{unit:'mm',format:'a4',orientation:'portrait'},
      html2canvas:{scale:2,useCORS:true}
    }).from(invoice).save().then(()=>{
      document.querySelectorAll(".no-print").forEach(e=>e.style.display="");
    });
  },200);
}

addRow();
</script>

</body>
</html>
